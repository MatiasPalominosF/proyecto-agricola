{"ast":null,"code":"import _classCallCheck from \"C:/Users/matia/Desktop/Proyecto/proyecto-agricola/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:/Users/matia/Desktop/Proyecto/proyecto-agricola/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport * as ɵngcc0 from '@angular/core';\n\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nvar __metadata = this && this.__metadata || function (k, v) {\n  if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\n\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\n\nimport { InjectionToken, NgZone, PLATFORM_ID, Injectable, Inject, Optional } from '@angular/core';\nimport { of, from } from 'rxjs';\nimport { AngularFirestoreDocument } from './document/document';\nimport { AngularFirestoreCollection } from './collection/collection';\nimport { AngularFirestoreCollectionGroup } from './collection-group/collection-group';\nimport { FIREBASE_OPTIONS, FIREBASE_APP_NAME, _firebaseAppFactory, ɵAngularFireSchedulers, ɵkeepUnstableUntilFirstFactory } from '@angular/fire';\nimport { isPlatformServer } from '@angular/common';\nimport firebase from 'firebase/app';\nexport var EnablePersistenceToken = new InjectionToken('angularfire2.enableFirestorePersistence');\nexport var PersistenceSettingsToken = new InjectionToken('angularfire2.firestore.persistenceSettings');\nexport var FirestoreSettingsToken = new InjectionToken('angularfire2.firestore.settings');\nexport var ENABLE_PERSISTENCE = EnablePersistenceToken;\nexport var PERSISTENCE_SETTINGS = PersistenceSettingsToken;\nexport var SETTINGS = FirestoreSettingsToken;\nvar major = parseInt(firebase.SDK_VERSION.split('.')[0]);\nvar minor = parseInt(firebase.SDK_VERSION.split('.')[1]);\nexport var DefaultFirestoreSettings = major < 5 || major == 5 && minor < 8 ? {\n  timestampsInSnapshots: true\n} : {};\nexport function associateQuery(collectionRef) {\n  var queryFn = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : function (ref) {\n    return ref;\n  };\n  var query = queryFn(collectionRef);\n  var ref = collectionRef;\n  return {\n    query: query,\n    ref: ref\n  };\n}\n\nvar AngularFirestore = /*#__PURE__*/function () {\n  function AngularFirestore(options, nameOrConfig, shouldEnablePersistence, settings, platformId, zone, persistenceSettings) {\n    var _this = this;\n\n    _classCallCheck(this, AngularFirestore);\n\n    this.schedulers = new ɵAngularFireSchedulers(zone);\n    this.keepUnstableUntilFirst = ɵkeepUnstableUntilFirstFactory(this.schedulers, platformId);\n    this.firestore = zone.runOutsideAngular(function () {\n      var app = _firebaseAppFactory(options, zone, nameOrConfig);\n\n      var firestore = app.firestore();\n      firestore.settings(settings || DefaultFirestoreSettings);\n      return firestore;\n    });\n\n    if (shouldEnablePersistence && !isPlatformServer(platformId)) {\n      var enablePersistence = function enablePersistence() {\n        try {\n          return from(_this.firestore.enablePersistence(persistenceSettings || undefined).then(function () {\n            return true;\n          }, function () {\n            return false;\n          }));\n        } catch (e) {\n          return of(false);\n        }\n      };\n\n      this.persistenceEnabled$ = zone.runOutsideAngular(enablePersistence);\n    } else {\n      this.persistenceEnabled$ = of(false);\n    }\n  }\n\n  _createClass(AngularFirestore, [{\n    key: \"collection\",\n    value: function collection(pathOrRef, queryFn) {\n      var collectionRef;\n\n      if (typeof pathOrRef === 'string') {\n        collectionRef = this.firestore.collection(pathOrRef);\n      } else {\n        collectionRef = pathOrRef;\n      }\n\n      var _associateQuery = associateQuery(collectionRef, queryFn),\n          ref = _associateQuery.ref,\n          query = _associateQuery.query;\n\n      return new AngularFirestoreCollection(ref, query, this);\n    }\n  }, {\n    key: \"collectionGroup\",\n    value: function collectionGroup(collectionId, queryGroupFn) {\n      if (major < 6) {\n        throw \"collection group queries require Firebase JS SDK >= 6.0\";\n      }\n\n      var queryFn = queryGroupFn || function (ref) {\n        return ref;\n      };\n\n      var firestore = this.firestore;\n      var collectionGroup = firestore.collectionGroup(collectionId);\n      return new AngularFirestoreCollectionGroup(queryFn(collectionGroup), this);\n    }\n  }, {\n    key: \"doc\",\n    value: function doc(pathOrRef) {\n      var ref;\n\n      if (typeof pathOrRef === 'string') {\n        ref = this.firestore.doc(pathOrRef);\n      } else {\n        ref = pathOrRef;\n      }\n\n      return new AngularFirestoreDocument(ref, this);\n    }\n  }, {\n    key: \"createId\",\n    value: function createId() {\n      return this.firestore.collection('_').doc().id;\n    }\n  }]);\n\n  return AngularFirestore;\n}();\n\nAngularFirestore.ɵfac = function AngularFirestore_Factory(t) {\n  return new (t || AngularFirestore)(ɵngcc0.ɵɵinject(FIREBASE_OPTIONS), ɵngcc0.ɵɵinject(FIREBASE_APP_NAME, 8), ɵngcc0.ɵɵinject(ENABLE_PERSISTENCE, 8), ɵngcc0.ɵɵinject(SETTINGS, 8), ɵngcc0.ɵɵinject(PLATFORM_ID), ɵngcc0.ɵɵinject(ɵngcc0.NgZone), ɵngcc0.ɵɵinject(PERSISTENCE_SETTINGS, 8));\n};\n\nAngularFirestore.ɵprov = /*@__PURE__*/ɵngcc0.ɵɵdefineInjectable({\n  token: AngularFirestore,\n  factory: function factory(t) {\n    return AngularFirestore.ɵfac(t);\n  }\n});\nAngularFirestore = __decorate([__param(0, Inject(FIREBASE_OPTIONS)), __param(1, Optional()), __param(1, Inject(FIREBASE_APP_NAME)), __param(2, Optional()), __param(2, Inject(ENABLE_PERSISTENCE)), __param(3, Optional()), __param(3, Inject(SETTINGS)), __param(4, Inject(PLATFORM_ID)), __param(6, Optional()), __param(6, Inject(PERSISTENCE_SETTINGS)), __metadata(\"design:paramtypes\", [Object, Object, Object, Object, Object, NgZone, Object])], AngularFirestore);\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(AngularFirestore, [{\n    type: Injectable\n  }], function () {\n    return [{\n      type: Object,\n      decorators: [{\n        type: Inject,\n        args: [FIREBASE_OPTIONS]\n      }]\n    }, {\n      type: Object,\n      decorators: [{\n        type: Optional\n      }, {\n        type: Inject,\n        args: [FIREBASE_APP_NAME]\n      }]\n    }, {\n      type: Object,\n      decorators: [{\n        type: Optional\n      }, {\n        type: Inject,\n        args: [ENABLE_PERSISTENCE]\n      }]\n    }, {\n      type: Object,\n      decorators: [{\n        type: Optional\n      }, {\n        type: Inject,\n        args: [SETTINGS]\n      }]\n    }, {\n      type: Object,\n      decorators: [{\n        type: Inject,\n        args: [PLATFORM_ID]\n      }]\n    }, {\n      type: ɵngcc0.NgZone\n    }, {\n      type: Object,\n      decorators: [{\n        type: Optional\n      }, {\n        type: Inject,\n        args: [PERSISTENCE_SETTINGS]\n      }]\n    }];\n  }, null);\n})();\n\nexport { AngularFirestore }; //# sourceMappingURL=firestore.js.map","map":{"version":3,"sources":["C:/Users/matia/Desktop/Proyecto/proyecto-agricola/node_modules/@angular/fire/firestore/es2015/firestore.js"],"names":["ɵngcc0","__decorate","decorators","target","key","desc","c","arguments","length","r","Object","getOwnPropertyDescriptor","d","Reflect","decorate","i","defineProperty","__metadata","k","v","metadata","__param","paramIndex","decorator","InjectionToken","NgZone","PLATFORM_ID","Injectable","Inject","Optional","of","from","AngularFirestoreDocument","AngularFirestoreCollection","AngularFirestoreCollectionGroup","FIREBASE_OPTIONS","FIREBASE_APP_NAME","_firebaseAppFactory","ɵAngularFireSchedulers","ɵkeepUnstableUntilFirstFactory","isPlatformServer","firebase","EnablePersistenceToken","PersistenceSettingsToken","FirestoreSettingsToken","ENABLE_PERSISTENCE","PERSISTENCE_SETTINGS","SETTINGS","major","parseInt","SDK_VERSION","split","minor","DefaultFirestoreSettings","timestampsInSnapshots","associateQuery","collectionRef","queryFn","ref","query","AngularFirestore","options","nameOrConfig","shouldEnablePersistence","settings","platformId","zone","persistenceSettings","schedulers","keepUnstableUntilFirst","firestore","runOutsideAngular","app","enablePersistence","undefined","then","e","persistenceEnabled$","pathOrRef","collection","collectionId","queryGroupFn","collectionGroup","doc","id","ɵfac","AngularFirestore_Factory","t","ɵɵinject","ɵprov","ɵɵdefineInjectable","token","factory","ngDevMode","ɵsetClassMetadata","type","args"],"mappings":"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","sourcesContent":["import * as ɵngcc0 from '@angular/core';\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __metadata = (this && this.__metadata) || function (k, v) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nimport { InjectionToken, NgZone, PLATFORM_ID, Injectable, Inject, Optional } from '@angular/core';\r\nimport { of, from } from 'rxjs';\r\nimport { AngularFirestoreDocument } from './document/document';\r\nimport { AngularFirestoreCollection } from './collection/collection';\r\nimport { AngularFirestoreCollectionGroup } from './collection-group/collection-group';\r\nimport { FIREBASE_OPTIONS, FIREBASE_APP_NAME, _firebaseAppFactory, ɵAngularFireSchedulers, ɵkeepUnstableUntilFirstFactory } from '@angular/fire';\r\nimport { isPlatformServer } from '@angular/common';\r\nimport firebase from 'firebase/app';\r\nexport const EnablePersistenceToken = new InjectionToken('angularfire2.enableFirestorePersistence');\r\nexport const PersistenceSettingsToken = new InjectionToken('angularfire2.firestore.persistenceSettings');\r\nexport const FirestoreSettingsToken = new InjectionToken('angularfire2.firestore.settings');\r\nexport const ENABLE_PERSISTENCE = EnablePersistenceToken;\r\nexport const PERSISTENCE_SETTINGS = PersistenceSettingsToken;\r\nexport const SETTINGS = FirestoreSettingsToken;\r\nconst major = parseInt(firebase.SDK_VERSION.split('.')[0]);\r\nconst minor = parseInt(firebase.SDK_VERSION.split('.')[1]);\r\nexport const DefaultFirestoreSettings = ((major < 5 || (major == 5 && minor < 8)) ? { timestampsInSnapshots: true } : {});\r\nexport function associateQuery(collectionRef, queryFn = ref => ref) {\r\n    const query = queryFn(collectionRef);\r\n    const ref = collectionRef;\r\n    return { query, ref };\r\n}\r\nlet AngularFirestore = class AngularFirestore {\r\n    constructor(options, nameOrConfig, shouldEnablePersistence, settings, platformId, zone, persistenceSettings) {\r\n        this.schedulers = new ɵAngularFireSchedulers(zone);\r\n        this.keepUnstableUntilFirst = ɵkeepUnstableUntilFirstFactory(this.schedulers, platformId);\r\n        this.firestore = zone.runOutsideAngular(() => {\r\n            const app = _firebaseAppFactory(options, zone, nameOrConfig);\r\n            const firestore = app.firestore();\r\n            firestore.settings(settings || DefaultFirestoreSettings);\r\n            return firestore;\r\n        });\r\n        if (shouldEnablePersistence && !isPlatformServer(platformId)) {\r\n            const enablePersistence = () => {\r\n                try {\r\n                    return from(this.firestore.enablePersistence(persistenceSettings || undefined).then(() => true, () => false));\r\n                }\r\n                catch (e) {\r\n                    return of(false);\r\n                }\r\n            };\r\n            this.persistenceEnabled$ = zone.runOutsideAngular(enablePersistence);\r\n        }\r\n        else {\r\n            this.persistenceEnabled$ = of(false);\r\n        }\r\n    }\r\n    collection(pathOrRef, queryFn) {\r\n        let collectionRef;\r\n        if (typeof pathOrRef === 'string') {\r\n            collectionRef = this.firestore.collection(pathOrRef);\r\n        }\r\n        else {\r\n            collectionRef = pathOrRef;\r\n        }\r\n        const { ref, query } = associateQuery(collectionRef, queryFn);\r\n        return new AngularFirestoreCollection(ref, query, this);\r\n    }\r\n    collectionGroup(collectionId, queryGroupFn) {\r\n        if (major < 6) {\r\n            throw \"collection group queries require Firebase JS SDK >= 6.0\";\r\n        }\r\n        const queryFn = queryGroupFn || (ref => ref);\r\n        const firestore = this.firestore;\r\n        const collectionGroup = firestore.collectionGroup(collectionId);\r\n        return new AngularFirestoreCollectionGroup(queryFn(collectionGroup), this);\r\n    }\r\n    doc(pathOrRef) {\r\n        let ref;\r\n        if (typeof pathOrRef === 'string') {\r\n            ref = this.firestore.doc(pathOrRef);\r\n        }\r\n        else {\r\n            ref = pathOrRef;\r\n        }\r\n        return new AngularFirestoreDocument(ref, this);\r\n    }\r\n    createId() {\r\n        return this.firestore.collection('_').doc().id;\r\n    }\r\n};\r\nAngularFirestore.ɵfac = function AngularFirestore_Factory(t) { return new (t || AngularFirestore)(ɵngcc0.ɵɵinject(FIREBASE_OPTIONS), ɵngcc0.ɵɵinject(FIREBASE_APP_NAME, 8), ɵngcc0.ɵɵinject(ENABLE_PERSISTENCE, 8), ɵngcc0.ɵɵinject(SETTINGS, 8), ɵngcc0.ɵɵinject(PLATFORM_ID), ɵngcc0.ɵɵinject(ɵngcc0.NgZone), ɵngcc0.ɵɵinject(PERSISTENCE_SETTINGS, 8)); };\r\nAngularFirestore.ɵprov = /*@__PURE__*/ ɵngcc0.ɵɵdefineInjectable({ token: AngularFirestore, factory: function (t) { return AngularFirestore.ɵfac(t); } });\r\nAngularFirestore = __decorate([ __param(0, Inject(FIREBASE_OPTIONS)),\r\n    __param(1, Optional()), __param(1, Inject(FIREBASE_APP_NAME)),\r\n    __param(2, Optional()), __param(2, Inject(ENABLE_PERSISTENCE)),\r\n    __param(3, Optional()), __param(3, Inject(SETTINGS)),\r\n    __param(4, Inject(PLATFORM_ID)),\r\n    __param(6, Optional()), __param(6, Inject(PERSISTENCE_SETTINGS)),\r\n    __metadata(\"design:paramtypes\", [Object, Object, Object, Object, Object,\r\n        NgZone, Object])\r\n], AngularFirestore);\r\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(AngularFirestore, [{\r\n        type: Injectable\r\n    }], function () { return [{ type: Object, decorators: [{\r\n                type: Inject,\r\n                args: [FIREBASE_OPTIONS]\r\n            }] }, { type: Object, decorators: [{\r\n                type: Optional\r\n            }, {\r\n                type: Inject,\r\n                args: [FIREBASE_APP_NAME]\r\n            }] }, { type: Object, decorators: [{\r\n                type: Optional\r\n            }, {\r\n                type: Inject,\r\n                args: [ENABLE_PERSISTENCE]\r\n            }] }, { type: Object, decorators: [{\r\n                type: Optional\r\n            }, {\r\n                type: Inject,\r\n                args: [SETTINGS]\r\n            }] }, { type: Object, decorators: [{\r\n                type: Inject,\r\n                args: [PLATFORM_ID]\r\n            }] }, { type: ɵngcc0.NgZone }, { type: Object, decorators: [{\r\n                type: Optional\r\n            }, {\r\n                type: Inject,\r\n                args: [PERSISTENCE_SETTINGS]\r\n            }] }]; }, null); })();\r\nexport { AngularFirestore };\r\n\r\n//# sourceMappingURL=firestore.js.map"]},"metadata":{},"sourceType":"module"}