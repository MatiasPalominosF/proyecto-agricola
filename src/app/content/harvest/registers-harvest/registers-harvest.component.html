<div class="modal-header">
  <h4 class="modal-title" id="myModalLabel4">{{ title }}</h4>
  <button
    type="button"
    class="close"
    aria-label="Close"
    (click)="activeModal.dismiss('Cross click')"
  >
    <span aria-hidden="true">&times;</span>
  </button>
</div>
<div class="modal-body px-0">
  <div style="overflow-y: hidden; height: calc(100vh - 15rem)">
    <div class="px-2" style="overflow-y: auto; height: 100%">
      <div class="row">
        <div class="col-md-12">
          <m-card [options]="options" (reloadFunction)="reload($event)">
            <ng-container mCardHeaderTitle>
              Categorías de las cosechas
            </ng-container>
            <ng-container mCardBody>
              <div class="row">
                <div class="col-md-4">
                  <div class="d-flex justify-content-md-center">
                    <div class="form-group form-inline">
                      Buscar:
                      <input
                        class="form-control ml-2"
                        [formControl]="filter"
                        type="text"
                      />
                    </div>
                  </div>
                </div>
                <div class="col-md-3">
                  <div class="d-flex justify-content-md-center">
                    <div class="form-group form-inline">
                      Desde:
                      <input
                        class="form-control ml-2"
                        type="date"
                        placeholder="yyyy-mm-dd"
                        name="from"
                        [(ngModel)]="from"
                      />
                    </div>
                  </div>
                </div>
                <div class="col-md-3">
                  <div class="d-flex justify-content-md-center">
                    <div class="form-group form-inline">
                      Hasta:
                      <input
                        class="form-control ml-2"
                        type="date"
                        placeholder="yyyy-mm-dd"
                        name="to"
                        [(ngModel)]="to"
                      />
                    </div>
                  </div>
                </div>
                <div class="col-md-2">
                  <div class="d-flex justify-content-md-center">
                    <div class="form-group form-inline">
                      <button
                        (click)="exportToExcel()"
                        type="button"
                        class="
                          btn btn-float btn-xs btn-square btn-outline-secondary
                        "
                      >
                        <i class="feather ft-download"></i>
                      </button>
                    </div>
                  </div>
                </div>
              </div>
              <div class="row">
                <div
                  class="table-responsive card-body"
                  *blockUI="'registerHarvest'; message: 'Loading'"
                >
                  <table class="table table-striped">
                    <thead>
                      <tr>
                        <th *ngFor="let head of headElements" scope="col">
                          {{ head }}
                        </th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr
                        mdbTableCol
                        *ngFor="
                          let element of harvestSearch
                            | async
                            | filterDate2: from:to
                            | slice
                              : (page - 1) * pageSize
                              : (page - 1) * pageSize + pageSize;
                          index as i
                        "
                      >
                        <td>
                          <ngb-highlight
                            [result]="element.id"
                            [term]="filter.value"
                          >
                          </ngb-highlight>
                        </td>
                        <td>
                          <ngb-highlight
                            [result]="element.name"
                            [term]="filter.value"
                          >
                          </ngb-highlight>
                        </td>
                        <td>
                          <ngb-highlight
                            [result]="element.acumulate | number"
                            [term]="filter.value"
                          >
                          </ngb-highlight>
                        </td>
                        <td>
                          <ngb-highlight
                            [result]="
                              element.lastDate.toDate()
                                | date: 'dd/MM/yyyy HH:mm'
                            "
                            [term]="
                              element.lastDate.toDate()
                                | date: 'dd/MM/yyyy HH:mm'
                            "
                          >
                          </ngb-highlight>
                        </td>
                        <td>
                          <div class="d-flex justify-content-start">
                            <button
                              (click)="showDetails(element.id, element.name)"
                              class="
                                btn btn-xs btn-social-icon
                                mr-1
                                mb-1
                                btn-instagram
                              "
                            >
                              <span class="la la-info"></span>
                            </button>
                          </div>
                        </td>
                      </tr>
                    </tbody>
                  </table>
                  <div class="d-flex justify-content-between p-2">
                    <ngb-pagination
                      [collectionSize]="collectionSize"
                      [(page)]="page"
                      [pageSize]="pageSize"
                    >
                    </ngb-pagination>

                    <select
                      class="custom-select"
                      style="width: auto"
                      [(ngModel)]="pageSize"
                    >
                      <option [ngValue]="collectionSize">
                        Mostrar todos los ítems
                      </option>
                      <option [ngValue]="2">2 ítems por página</option>
                      <option [ngValue]="4">4 ítems por página</option>
                      <option [ngValue]="6">6 ítems por página</option>
                      <option [ngValue]="collectionSize">
                        Mostrar todos lo ítems
                      </option>
                    </select>
                  </div>
                </div>
              </div>
            </ng-container>
          </m-card>
        </div>
      </div>
    </div>
  </div>
</div>
<div class="modal-footer">
  <button
    type="button"
    class="btn grey btn-outline-secondary"
    (click)="activeModal.dismiss('Cross click')"
  >
    Cerrar
  </button>
  <!--button type="button" class="btn btn-outline-primary">Save changes</button-->
</div>
